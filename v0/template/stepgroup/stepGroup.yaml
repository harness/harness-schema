type: object
title: template
required:
  - identifier
  - name
  - type
  - versionLabel
properties:
  identifier:
    type: string
    pattern: "^[a-zA-Z_][0-9a-zA-Z_]{0,63}$"
  name:
    type: string
    pattern: "^[a-zA-Z_][-0-9a-zA-Z_\\s]{0,63}$"
  type:
    type: string
    enum:
      - StepGroup
  variables:
    type: array
    items:
      oneOf:
        - "$ref": "../../pipeline/number_variable.yaml"
        - "$ref": "../../pipeline/secret_variable.yaml"
        - "$ref": "../../pipeline/string_variable.yaml"
  versionLabel:
    type: string
    pattern: "^[0-9a-zA-Z][^\\s]{0,63}$"
  spec:
    stageType:
      type: string
      enum:
        - Custom
        - Approval
        - Deployment
    configRef:
      anyOf:
        - if:
            properties:
              spec:
                properties:
                  stageType:
                    const: Custom
          then:
            const: ../template_config.yaml/custom_step_group_stage_template_types
        - if:
            properties:
              spec:
                properties:
                  stageType:
                    const: Approval
          then:
            const: ../template_config.yaml/approval_step_group_stage_template_types
        - if:
            properties:
              spec:
                properties:
                  stageType:
                    const: Deployment
          then:
            const: ../template_config.yaml/deployment_step_group_stage_template_types
  tags:
    type: object
    additionalProperties:
      type: string
  description:
    type: string
  icon:
    type: string
