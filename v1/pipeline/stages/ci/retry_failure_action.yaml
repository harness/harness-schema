title: PostAction
type: object
description: Failure action on failure for all retries
properties:
  type:
    description: Type defines the failure strategy type.
    type: string
    enum:
      - abort
      - ignore
      - success
      - stage-rollback
      - pipeline-rollback
      - fail
      - manual-intervention

oneOf:
  - allOf:
      - properties:
          type:
            const: success
      - properties:
          spec:
            $ref: ./empty_spec.yaml
  - allOf:
      - properties:
          type:
            const: fail
      - properties:
          spec:
            $ref: ./empty_spec.yaml
  - allOf:
      - properties:
          type: stage-rollback
      - properties:
          spec:
            $ref: ./empty_spec.yaml
  - allOf:
      - properties:
          type: pipeline-rollback
      - properties:
          spec:
            $ref: ./empty_spec.yaml
  - allOf:
      - properties:
          type:
            const: abort
      - properties:
          spec:
            $ref: ../../common/failure_abort.yaml
  - allOf:
      - properties:
          type:
            const: ignore
      - properties:
          spec:
            $ref: ../../common/failure_ignore.yaml
  - allOf:
      - properties:
          type:
            const: manual-intervention
      - properties:
          spec:
            $ref: ../../common/failure_manual.yaml