title: InfraDefSpec
type: object
required:
  - spec
  - type
  - variables
properties:
  type:
    type: string
    enum:
      - kubernetes-gcp
  parallel:
    oneOf:
      - type: string
      - type: boolean
    description: true value of parallel field allow multiple deployment on same infra simultaneously
  variables:
    type: object
    description: Variables defines for infra structure definition
    additionalProperties:
      oneOf:
        - "$ref": ../pipeline/common/string-variable.yaml
        - "$ref": ../pipeline/common/number-variable.yaml
        - "$ref": ../pipeline/common/array-variable.yaml
        - "$ref": ../pipeline/common/boolean-variable.yaml
        - "$ref": ../pipeline/common/object-variable.yaml
        - "$ref": ../pipeline/common/secret-variable.yaml
allOf:
  - if:
      properties:
        type:
          const: kubernetes-gcp
    then:
      properties:
        spec:
          $ref: kubernetes-gcp-infra-def-spec.yaml
$schema: http://json-schema.org/draft-07/schema#