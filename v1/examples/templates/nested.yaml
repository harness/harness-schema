version: 1
kind: template
spec:
  id: nested
  versionLabel: v1
  type: Stage
  spec:
    type: Custom
    timeout: 30m
    spec:
        steps:
          - type: plugin
            id: http1 
            timeout: 10m
            spec:
                uses: http
                with:
                    url: https://www.<+ template.inputs.env>.harness.io
                    method: GET
          - type: template
            id: http2
            spec:
              name: htpl
              inputs:
                env: <+ template.inputs.env>
    outputs:
#      Only status is exported out for the step and not other outputs produced by
#      http step like httpBody etc. User can also use the operators here to massage the
#      output like process body using json.select
      url:
        desc: "some desc"
        # This replaces line 5
        value: <+ spec.steps.http1.spec.with.url>
      status:
        desc: "some desc"
        value: <+ spec.steps.http2.outputs.httpStatus>
      # Please note this expresiion
      timeout:
        desc: "some desc"
        value: <+ timeout>
  inputs:
    env:
      type: string
      required: true
      desc: "the env in which the the stage is executing"